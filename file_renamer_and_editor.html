<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1.0"><title>Advanced File Editor</title><style>body{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Helvetica,Arial,sans-serif;background-color:#1e1e1e;color:#d4d4d4;display:flex;justify-content:center;align-items:center;height:100vh;margin:0}.container{background-color:#252526;padding:30px;border-radius:8px;box-shadow:0 4px 12px rgba(0,0,0,.5);width:480px;border:1px solid #3c3c3c}h2{margin-top:0;color:#ccc;border-bottom:1px solid #444;padding-bottom:10px}.input-group{margin-bottom:20px}label{display:block;margin-bottom:8px;font-weight:700;color:#a0a0a0}input[type=file],input[type=text]{width:100%;padding:10px;box-sizing:border-box;border-radius:4px;border:1px solid #3c3c3c;background-color:#333;color:#ccc;font-size:14px}input::file-selector-button{background-color:#0e639c;color:#fff;border:none;padding:8px 12px;border-radius:4px;cursor:pointer;margin-right:10px}button{width:100%;padding:12px;background-color:#007acc;color:#fff;font-size:16px;border:none;border-radius:4px;cursor:pointer;transition:background-color .2s;margin-top:10px}button:hover{background-color:#005a9e}button:disabled{background-color:#444;cursor:not-allowed}#result{margin-top:20px;padding:15px;background-color:#1e1e1e;border:1px solid #444;border-radius:4px;word-wrap:break-word;font-family:"Courier New",Courier,monospace}.modal-overlay{display:none;position:fixed;z-index:1000;left:0;top:0;width:100%;height:100%;overflow:auto;background-color:rgba(0,0,0,.7);justify-content:center;align-items:center}.modal-content{background-color:#252526;margin:auto;padding:20px;border:1px solid #555;width:80%;max-width:800px;border-radius:8px;box-shadow:0 5px 15px rgba(0,0,0,.5);display:flex;flex-direction:column;height:80vh}.modal-header{display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid #444;padding-bottom:10px;margin-bottom:15px}.modal-header h3{margin:0}.close-btn{color:#aaa;font-size:28px;font-weight:700;cursor:pointer}.close-btn:hover{color:#fff}#editor{flex-grow:1;width:100%;background-color:#1e1e1e;color:#d4d4d4;border:1px solid #3c3c3c;border-radius:4px;resize:none;font-family:"Courier New",monospace;font-size:14px;padding:10px;box-sizing:border-box}.modal-footer{margin-top:15px;display:flex;justify-content:flex-end}</style></head><body><div class="container"><h2>Advanced File Editor & Renamer</h2><div class="input-group"><label for="fileInput">1. Select a File (Optional)</label><input type="file" id="fileInput"></div><div class="input-group"><button id="editCreateBtn">Edit / Create File</button></div><div class="input-group"><label for="newNameInput">2. Set New Name or Extension</label><input type="text" id="newNameInput" placeholder="e.g., new_file_name OR .txt" disabled></div><div id="result"><p><strong>Original:</strong> <span id="originalName">No file active</span></p><p><strong>New:</strong> <span id="newName">N/A</span></p></div><button id="downloadBtn" disabled>Download File</button></div><div id="editorModal" class="modal-overlay"><div class="modal-content"><div class="modal-header"><h3 id="modalTitle">File Editor</h3><span class="close-btn">&times;</span></div><textarea id="editor" placeholder="File content goes here..."></textarea><div class="modal-footer"><button id="saveBtn">Save Changes</button></div></div></div><script>const f=document.getElementById("fileInput"),n=document.getElementById("newNameInput"),o=document.getElementById("originalName"),t=document.getElementById("newName"),d=document.getElementById("downloadBtn"),c=document.getElementById("editCreateBtn"),e=document.getElementById("editorModal"),i=document.getElementById("modalTitle"),l=document.getElementById("editor"),a=document.getElementById("saveBtn"),s=document.querySelector(".close-btn");let u=null,m="untitled.txt";function p(){const o=null!==u;n.disabled=!o,d.disabled=!o,o?(originalName.textContent=m,g()):(originalName.textContent="No file active",t.textContent="N/A",n.value="")}function g(){if(!u)return;const o=n.value.trim();let r;r=""===o?m:o.startsWith(".")?(-1===(e=m.lastIndexOf("."))?m:m.substring(0,e))+o:o,t.textContent=r}function E(){e.style.display="flex"}function w(){e.style.display="none"}f.addEventListener("change",e=>{e.target.files.length>0&&(u=e.target.files[0],m=u.name,p())}),n.addEventListener("input",g),c.addEventListener("click",()=>{if(u&&f.files[0]){i.textContent=`Editing: ${m}`;const e=new FileReader;e.onload=e=>{l.value=e.target.result},e.onerror=()=>{l.value="Error: Could not read file."},e.readAsText(u)}else i.textContent="Create New File",l.value="",f.value="",u=null,m="untitled.txt",p();E()}),s.onclick=w,window.onclick=o=>{o.target==e&&w()},a.addEventListener("click",()=>{const e=l.value,o=u?u.type:"text/plain";u=new Blob([e],{type:o}),i.textContent.startsWith("Create")&&(m=n.value.trim()||"untitled.txt"),p(),w()}),d.addEventListener("click",()=>{if(!u)return void alert("No active file to download.");const o=t.textContent;if(!o||"N/A"===o)return void alert("Please set a valid new name for the file.");const n=document.createElement("a");n.href=URL.createObjectURL(u),n.download=o,document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(n.href)}),p();</script></body></html>
