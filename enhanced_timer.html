<!DOCTYPE html><html lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1,user-scalable=no"><title>Enhanced Timer</title><link rel=icon href=data:image/bmp;base64,Qk0kAAAAAAAAACAAAAAMAAAAAQABAAEAAQAAAAD///8AAAAA><link rel=apple-touch-icon href=data:image/bmp;base64,Qk0kAAAAAAAAACAAAAAMAAAAAQABAAEAAQAAAAD///8AAAAA><link rel=manifest href=data:application/manifest+json,%7B%22name%22%3A%22Enhanced%20Timer%22%2C%22short_name%22%3A%22Timer%22%2C%22start_url%22%3A%22.%22%2C%22display%22%3A%22standalone%22%2C%22background_color%22%3A%22%23121212%22%2C%22theme_color%22%3A%22%23121212%22%2C%22icons%22%3A%5B%7B%22src%22%3A%22data%3Aimage%2Fbmp%3Bbase64%2CQk0kAAAAAAAAACAAAAAMAAAAAQABAAEAAQAAAAD%2F%2F%2F8AAAAA%22%2C%22sizes%22%3A%2212x12%22%2C%22type%22%3A%22image%2Fbmp%22%7D%5D%7D><meta name=apple-mobile-web-app-capable content=yes><meta name=apple-mobile-web-app-status-bar-style content=black-translucent><style>:root{--yellow-flash:#f3ca20;--red-flash:#d92027;--bg-color:#121212;--main-text-color:#e0e0e0;--secondary-text-color:#888;--history-text-color:#666;--panel-bg-color:#2a2a2a}html,body{height:100%;margin:0;padding:0;font-family:'Courier New',Courier,monospace;background-color:var(--bg-color);color:var(--main-text-color);overflow:hidden;-webkit-user-select:none;-ms-user-select:none;user-select:none;-webkit-tap-highlight-color:transparent}.container{display:flex;height:100%;width:100%;transition:background-color .1s ease-in-out}.main-display{flex-grow:1;display:flex;flex-direction:column;justify-content:center;align-items:center;height:100%}#timer{font-size:25vw;font-weight:700;line-height:1}#previous-time{font-size:5vw;color:var(--secondary-text-color);margin-top:10px;min-height:6vw}.history{width:220px;padding:20px;border-left:1px solid #333;height:100vh;overflow-y:auto;box-sizing:border-box}.history h2{margin-top:0;color:var(--secondary-text-color);font-size:1.2em}.history ol{padding-left:25px;margin:0;color:var(--history-text-color);font-size:1.1em}.history li{margin-bottom:5px}.flash-yellow{background-color:var(--yellow-flash)!important}.flash-red{background-color:var(--red-flash)!important}#settings-button{position:absolute;top:15px;right:15px;width:40px;height:40px;cursor:pointer;z-index:1001;color:var(--secondary-text-color)}#settings-button:hover{color:var(--main-text-color)}#settings-modal{display:none;position:fixed;top:0;left:0;width:100%;height:100%;background-color:rgba(0,0,0,.7);z-index:1000;justify-content:center;align-items:center}#settings-modal.visible{display:flex}.settings-panel{background-color:var(--panel-bg-color);padding:30px;border-radius:8px;color:var(--main-text-color);display:flex;flex-direction:column;gap:25px;border:1px solid #444;min-width:300px}.setting-row{display:flex;justify-content:space-between;align-items:center}.setting-row label{font-size:1.1em}.setting-row input[type=number]{font-size:1.2em;width:80px;padding:8px;background-color:var(--bg-color);border:1px solid #555;color:var(--main-text-color);border-radius:4px;text-align:center}.setting-toggle{display:flex;align-items:center;gap:12px}.setting-toggle input[type=checkbox]{width:22px;height:22px;cursor:pointer}.setting-toggle span{color:var(--secondary-text-color);margin-left:-5px}.setting-row input[type=color]{width:50px;height:35px;border:1px solid #555;padding:2px;background-color:var(--bg-color);cursor:pointer}.settings-panel button{font-size:1.2em;padding:10px 20px;border:none;border-radius:4px;background-color:var(--yellow-flash);color:var(--bg-color);cursor:pointer;font-weight:700;margin-top:10px}#install-app-button{background-color:transparent;color:var(--yellow-flash);border:2px solid var(--yellow-flash);margin-top:0;transition:opacity .3s,color .3s,border-color .3s}#install-app-button.inactive{opacity:.5;color:var(--secondary-text-color);border-color:var(--secondary-text-color);cursor:not-allowed}</style></head><body><div id=settings-button><svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 24 24" fill=currentColor><path d="M19.14,12.94c0.04-0.3,0.06-0.61,0.06-0.94c0-0.32-0.02-0.64-0.07-0.94l2.03-1.58c0.18-0.14,0.23-0.41,0.12-0.61 l-1.92-3.32c-0.12-0.22-0.37-0.29-0.59-0.22l-2.39,0.96c-0.5-0.38-1.03-0.7-1.62-0.94L14.4,2.81c-0.04-0.24-0.24-0.41-0.48-0.41 h-3.84c-0.24,0-0.44,0.17-0.48,0.41L9.2,5.7c-0.59,0.24-1.13,0.57-1.62,0.94l-2.39-0.96c-0.22-0.08-0.47,0-0.59,0.22L2.69,9.22 c-0.11,0.2-0.06,0.47,0.12,0.61l2.03,1.58C4.78,11.66,4.76,11.97,4.76,12.3c0,0.32,0.02,0.64,0.07,0.94l-2.03,1.58 c-0.18,0.14-0.23,0.41-0.12,0.61l1.92,3.32c0.12,0.22,0.37,0.29,0.59,0.22l2.39-0.96c0.5,0.38,1.03,0.7,1.62,0.94l0.36,2.89 c0.04,0.24,0.24,0.41,0.48,0.41h3.84c0.24,0,0.44-0.17,0.48-0.41l0.36-2.89c0.59-0.24,1.13-0.57,1.62-0.94l2.39,0.96 c0.22,0.08,0.47,0,0.59,0.22l1.92-3.32c0.11-0.2,0.06-0.47-0.12-0.61L19.14,12.94z M12,15.6c-1.98,0-3.6-1.62-3.6-3.6 s1.62-3.6,3.6-3.6s3.6,1.62,3.6,3.6S13.98,15.6,12,15.6z"></path></svg></div><div id=settings-modal><div class=settings-panel><div class=setting-row><label for=target-time-input>Target Time (sec)</label><input type=number id=target-time-input min=1></div><div class=setting-row><label for=debounce-toggle>Reset Protection</label><div class=setting-toggle><input type=checkbox id=debounce-toggle><input type=number id=debounce-time-input min=0><span>ms</span></div></div><div class=setting-row><label for=yellow-color-input>Warning Flash</label><input type=color id=yellow-color-input></div><div class=setting-row><label for=red-color-input>Target Flash</label><input type=color id=red-color-input></div><button id=install-app-button class=inactive>Download as App</button><button id=save-settings-button>Save & Close</button></div></div><div class=container id=container><div class=main-display><div id=timer>00.000</div><div id=previous-time></div></div><aside class=history><h2>History</h2><ol id=history-list></ol></aside></div><script>const d=document,g=e=>d.getElementById(e),o=(e,t,n)=>e.addEventListener(t,n),c=g("container"),r=g("timer"),s=g("previous-time"),a=g("history-list"),l=g("settings-button"),i=g("settings-modal"),u=g("target-time-input"),m=g("debounce-toggle"),f=g("debounce-time-input"),h=g("yellow-color-input"),p=g("red-color-input"),v=g("save-settings-button"),y=g("install-app-button");let b=null,w=0,S=null,E=!1,A=-1,C=[],T=null,L,M,_,D,N;function k(e,t){d.documentElement.style.setProperty("--yellow-flash",e),d.documentElement.style.setProperty("--red-flash",t)}function H(){L=parseInt(localStorage.getItem("targetTime"))||60,M="false"!==localStorage.getItem("isDebounceEnabled"),_=parseInt(localStorage.getItem("debounceTime"))||300,D=localStorage.getItem("yellowFlashColor")||"#f3ca20",N=localStorage.getItem("redFlashColor")||"#d92027",u.value=L,m.checked=M,f.value=_,h.value=D,p.value=N,k(D,N)}function B(){const e=parseInt(u.value),t=parseInt(f.value);if(isNaN(e)||e<=0)return void alert("Target Time must be a positive number.");if(isNaN(t)||t<0)return void alert("Reset Protection time must be a positive number.");L=e,M=m.checked,_=t,D=h.value,N=p.value,localStorage.setItem("targetTime",L),localStorage.setItem("isDebounceEnabled",M),localStorage.setItem("debounceTime",_),localStorage.setItem("yellowFlashColor",D),localStorage.setItem("redFlashColor",N),k(D,N),i.classList.remove("visible")}H();const P=()=>{if(!T)T=new(window.AudioContext||window.webkitAudioContext);const e=T.createOscillator(),t=T.createGain();e.connect(t),t.connect(T.destination),e.type="sine",e.frequency.setValueAtTime(880,T.currentTime),t.gain.setValueAtTime(.5,T.currentTime),t.gain.exponentialRampToValueAtTime(.001,T.currentTime+.1),e.start(T.currentTime),e.stop(T.currentTime+.1),setTimeout(()=>{const e=T.createOscillator(),t=T.createGain();e.connect(t),t.connect(T.destination),e.type="sine",e.frequency.setValueAtTime(880,T.currentTime),t.gain.setValueAtTime(.5,T.currentTime),t.gain.exponentialRampToValueAtTime(.001,T.currentTime+.15),e.start(T.currentTime),e.stop(T.currentTime+.15)},150)};function F(e){const t=Math.floor(e/1e3),n=Math.floor(e%1e3);return`${String(t).padStart(2,"0")}.${String(n).padStart(3,"0")}`}function O(){const e=Date.now()-w;r.textContent=F(e);const t=Math.floor(e/1e3);if(t===A)return;const n=[{s:L-10,c:"yellow"},{s:L-5,c:"yellow"},{s:L-4,c:"yellow"},{s:L-3,c:"yellow"},{s:L-2,c:"yellow"},{s:L-1,c:"yellow"}];let o=!1;for(const i of n)if(t===i.s&&i.s>=0){x(i.c),A=t,o=!0;break}o||(t===L?(x("red"),P(),A=t):t>L&&(x("red"),A=t))}function x(e){c.classList.add(`flash-${e}`),setTimeout(()=>c.classList.remove(`flash-${e}`),150)}function q(){s.textContent=C.length>0?`Prev: ${C[0]}`:"",a.innerHTML=C.map(e=>`<li>${e}</li>`).join("")}function j(e){if(e.target.closest("#settings-button")||e.target.closest("#settings-modal"))return;if(M&&E&&Date.now()-w<_)return;E&&(C.unshift(F(Date.now()-w)),C.length>50&&C.pop()),clearInterval(S),q(),E=!0,w=Date.now(),A=-1,r.textContent="00.000",S=setInterval(O,16)}o(window,"beforeinstallprompt",e=>{e.preventDefault(),b=e,y.classList.remove("inactive")}),o(y,"click",async()=>{b?(b.prompt(),await b.userChoice,b=null,y.classList.add("inactive")):alert("App installation is not available right now.\n\nTo install this app:\n1. Use a compatible browser (like Chrome on Desktop/Android, or Edge).\n2. Make sure you are visiting the secure (https://) version of this page.\n\nOn iPhone, use Safari's 'Share' button and then 'Add to Home Screen'.\n\nIf you've met these conditions and it still doesn't work, please message the developer.")}),o(window,"appinstalled",()=>{b=null}),o(l,"click",()=>{i.classList.add("visible")}),o(v,"click",B),o(i,"click",e=>{e.target===i&&i.classList.remove("visible")}),o(d.body,"mouseup",j),o(d.body,"touchend",j);</script></body></html>
