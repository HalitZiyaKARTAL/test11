deleter() { local src="$1" dest="$2" ip="$3" port="$4" list="$5" h="$6" t="$7"; if [ -z "$src" ]; then echo "WARNING: Source empty. Using current directory: $(pwd)"; else echo "WARNING: Changing directory to: $src"; cd "$src" || { echo "Error: Could not enter directory"; return 1; }; fi; { touch t1 t2 t3 t4; head -n "$h" "$list" | tail -n "$t" | tr -d '\r' > t1; while read -r f; do [ -f "$f" ] && echo "$f"; done < t1 > t2; cat t1 | ssh -p "$port" "$ip" "cd \"$dest\" && while read -r r; do [ -f \"\$r\" ] && echo \"\$r\"; done" > t3; grep -Fxf t3 t2 > t4 || true; echo -e "\n--- STATS ---\nList Slice : $(wc -l < t1)\nFound Here : $(wc -l < t2)\nFound There: $(wc -l < t3)\nFound Both : $(wc -l < t4)\n-------------\nFirst: $(head -n 1 t4)\nLast : $(tail -n 1 t4)\n"; read -p "Delete 'Found Both'? (y/n) " c; [ "$c" = "y" ] && xargs -d '\n' -a t4 rm -v; rm t1 t2 t3 t4; }; }
