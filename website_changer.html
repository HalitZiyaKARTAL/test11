<!DOCTYPE html><html lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Website Changer</title><style>:root{--m:#b366ff;--b:#111;--t:#eee;--d:#222;--br:#444}body{margin:0;padding:20px 0 100px;background:#050505;color:var(--t);font:12px monospace;width:100%;overflow-x:hidden}.main{margin:0 auto;width:90%;background:var(--b);border:1px solid var(--m);border-radius:8px;padding:15px;box-shadow:0 0 15px #40f}h3{color:var(--m);margin:0 0 15px;text-align:center;font-size:1.2em;letter-spacing:1px}input,textarea,button{width:100%;background:var(--d);border:1px solid var(--br);color:#fff;padding:10px;box-sizing:border-box;margin-bottom:10px;display:block;font-family:monospace}input[type=file]{padding:5px;background:#1a1a1a;color:#888}textarea{resize:vertical;min-height:80px}.dd-wrap{position:relative;width:100%;margin-bottom:10px}.dd-inp{width:100%;padding-right:30px;margin:0}.dd-arrow{position:absolute;right:1px;top:1px;bottom:1px;width:30px;background:var(--d);border-left:1px solid var(--br);color:#888;cursor:pointer;display:flex;align-items:center;justify-content:center;user-select:none}.dd-arrow:hover{color:#fff}.dd-list{position:absolute;top:100%;left:0;width:100%;background:#151515;border:1px solid var(--m);z-index:99;max-height:200px;overflow-y:auto;display:none;box-shadow:0 5px 15px #000e}.dd-item{padding:10px;border-bottom:1px solid #333;cursor:pointer}.dd-item:hover{background:var(--m);color:#000}.slot-actions{display:flex;gap:10px;margin-bottom:15px;justify-content:flex-end;align-items:center}button{background:var(--m);color:#000;font-weight:700;cursor:pointer}button.sec{background:#333;color:#fff;border:1px solid #555;width:auto;padding:8px 20px;margin:0}button.sec:hover{background:#444}label{color:#aaa;font-size:11px;margin-bottom:4px;display:block;font-weight:bold}.opt-group{display:flex;flex-wrap:wrap;gap:8px;margin-bottom:15px}.opt{display:inline-flex;align-items:center;cursor:pointer;user-select:none;word-spacing:-2px}.opt input{width:auto;margin:0 0 0 4px;accent-color:var(--m)}.grp{display:inline-flex;align-items:center}.head-row{display:flex;align-items:center;gap:10px;margin-bottom:4px;flex-wrap:wrap}.cors-group{display:flex;align-items:center;gap:6px;position:relative}.cors-lbl{color:#aaa;cursor:pointer;display:flex;align-items:center;font-size:11px;font-weight:700;margin:0}.cors-lbl input{margin:0 0 0 4px;width:auto}.with-txt{color:#666;font-size:11px;font-weight:700}.p-wrap{display:inline-block;position:static;font-size:11px}.p-head{background:transparent;border:none;padding:0;cursor:pointer;color:#ccc;font-weight:700;display:flex;align-items:center;gap:4px}.p-head:hover{color:#fff}.p-drop{position:absolute;top:100%;left:0;min-width:100%;width:max-content;background:#181818;border:1px solid #444;z-index:200;display:none;box-shadow:0 5px 10px #000}.p-row{display:flex;flex-direction:column;border-bottom:1px solid #333;padding:4px}.p-name{flex-grow:1;cursor:pointer;padding:0 8px;display:flex;flex-direction:column}.p-name span{white-space:nowrap}.p-name small{font-size:9px;color:#777;font-weight:400}.p-url{font-size:9px;color:#555;line-height:1.4;word-break:break-all;white-space:pre-wrap}.p-name:hover{color:#fff}.p-name.sel{color:var(--m)}.p-left{display:flex;gap:1px;margin-right:5px;margin-top:2px}.p-right{display:flex;gap:1px;margin-top:2px}.p-btn{width:1.3em;height:1.3em;margin:0;padding:0;font-size:inherit;line-height:1.1;text-align:center;background:#333;border:1px solid #444;color:#888;cursor:pointer;flex-shrink:0}.p-btn:hover{color:#fff;background:#555}.p-btn.del{color:#f55;border-color:#533}.p-btn.del:hover{background:#533;color:#fff}.p-btn.ed{color:#da0;border-color:#550}.p-btn.ed:hover{background:#550;color:#fff}.p-btn.sv{color:#0f0;border-color:#050}.p-btn.sv:hover{background:#050;color:#fff}.p-add{display:flex;padding:5px;border-top:1px solid #444}.p-add input{margin:0;font-size:10px;padding:4px}.p-add button{width:25px;margin:0 0 0 2px;padding:0;background:#333;color:#fff;border:1px solid #444}.p-edit-row{display:flex;width:100%;gap:2px;background:#222;padding:2px}.p-edit-row input{margin:0;padding:2px;font-size:10px;border:1px solid #444;background:#111}#p-auto span{font-size:14px;font-weight:700}#p-cur{font-weight:700}</style></head><body><div class=main><h3>WEBSITE CHANGER (FIXED SMART)</h3><label>SAVE SLOT</label><div class=dd-wrap id=dd-con><input type=text class=dd-inp id=sname value=Default placeholder="Slot Name" oninput=hIn() autocomplete=off><div class=dd-arrow onclick=toggleDD()>&#9660;</div><div class=dd-list id=dd-list></div></div><div class=slot-actions><label class=opt style=margin-right:auto><input type=checkbox id=autosave onchange=hIn()> Auto Save</label><button class=sec onclick=L() title="Load Data">LOAD</button><button class=sec onclick=S() title="Save Data">SAVE</button></div><div class=head-row><label style=margin:0>TARGET URL</label><div class=cors-group><label class=cors-lbl title="Use Proxy">Bypass CORS <input type=checkbox id=cors onchange=hIn()></label><span class=with-txt>with</span><div class=p-wrap id=p-wrap><div class=p-head onclick=tP()><span>Proxy: <span id=p-cur>AUTO</span></span><span style="font-size:9px">&#9660;</span></div><div class=p-drop id=p-drop><div class="p-row" onclick="sP(-1)"><div class="p-name" id=p-auto><div style="display:flex;align-items:center;width:100%"><span>AUTO</span><small style="margin-left:5px;flex-shrink:0">(loops list in order)</small><label style="font-size:10px;font-weight:400;cursor:pointer;display:flex;align-items:center;margin:0 0 0 auto;padding-left:2em;color:#aaa;white-space:nowrap" onclick="event.stopPropagation()">Aggressive<input type=checkbox id=p-ag checked onchange="agSt=this.checked;hIn()" style="margin:0 0 0 4px;width:auto"></label></div></div></div><div id=p-list></div><div class=p-add><input id=p-new placeholder="https://proxy.com/?url=" onfocus="if(!this.value)this.value='https://'"><button onclick=addP()>+</button></div></div></div></div></div><input type=text id=url oninput=hIn() onchange=chkU(this)><label>SOURCE HTML</label><input type=file id=html><div class=opt-group><label class=opt>Auto Sync<input type=checkbox id=sync onchange=hIn() checked></label><label class=opt>+Link Change<input type=checkbox id=link onchange=hIn() checked></label><label class=opt>+Remove Cloudflare<input type=checkbox id=cf onchange=hIn()></label><label class=opt>+Speed Changer&Console<input type=checkbox id=tool onchange=hIn() checked></label><span class=grp><label class=opt>+Richer Time Manipulation<input type=checkbox id=rtm onchange=hIn()></label><label class=opt style="color:#aaa;margin:0">(Eval in Workers)<input type=checkbox id=ew onchange=hIn()></label></span><span class=grp><label class=opt>+LocalData Partition<input type=checkbox id=ldp onchange=hIn()></label><label class=opt style="color:#aaa;margin:0">(Use Only Domain)<input type=checkbox id=dom onchange=hIn()></label></span></div><label>TIME (=, +=, -=)</label><input type=text id=time value="+=0" oninput=hIn()><label>INJECT CODE</label><textarea id=code oninput=hIn() rows=5></textarea><input type=file id=js><button onclick=run()>INJECT & RUN</button></div><script>const G=e=>document.getElementById(e),LS=localStorage,KS="website_changer.slots.",KA="website_changer.active_slot";let tm,pxs=[{n:'CodeTabs',u:'https://api.codetabs.com/v1/proxy?quest='},{n:'AllOrigins',u:'https://api.allorigins.win/raw?url='}],sel=-1,edI=-1,agSt=1,uF="",noSl=0;window.onload=()=>{window.onclick=e=>{if(!G("dd-con").contains(e.target))G("dd-list").style.display="none";if(!G("p-wrap").contains(e.target))G("p-drop").style.display="none"};let a=LS.getItem(KA);if(a)G("sname").value=a;L();rP()};function hIn(){if(G("autosave").checked){clearTimeout(tm);tm=setTimeout(()=>S(1),400)}}function chkU(e){let v=e.value;if(uF&&uF===v+'/'){uF=v;noSl=1;return}if(uF&&uF===v)return;if(v&&!v.endsWith('/')&&!v.match(/\.[a-zA-Z0-9]+$/)&&!v.includes('?')){e.value=v+'/';uF=e.value;noSl=0}else{uF=v;noSl=0}}function toggleDD(){let l=G("dd-list");if(l.style.display=="block"){l.style.display="none";return}l.innerHTML="";let f=document.createDocumentFragment(),c=0;for(let i=0;i<LS.length;i++){let k=LS.key(i);if(k&&k.startsWith(KS)){c++;let n=k.replace(KS,""),d=document.createElement("div");d.className="dd-item";d.innerText=n;d.onclick=()=>{G("sname").value=n;toggleDD();L()};f.appendChild(d)}}if(!c){let e=document.createElement("div");e.style.padding="8px";e.style.color="#666";e.innerText="No saves";f.appendChild(e)}l.appendChild(f);l.style.display="block"}function S(q){let n=G("sname").value.trim();if(!n)return;let d={as:G("autosave").checked,px:pxs,pi:sel,ag:agSt,ns:noSl};["url","time","code"].forEach(k=>d[k]=G(k).value);["sync","link","cf","tool","rtm","ew","ldp","dom","cors"].forEach(k=>d[k]=G(k).checked);LS.setItem(KS+n,JSON.stringify(d));LS.setItem(KA,n);if(!q){let b=document.querySelector('button[title="Save Data"]'),o=b.innerText;b.innerText="OK";setTimeout(()=>b.innerText=o,500)}}function L(){let n=G("sname").value.trim();if(!n)return;try{let d=JSON.parse(LS.getItem(KS+n));if(!d)return;["url","time","code"].forEach(k=>G(k).value=d[k]||"");["sync","link","cf","tool","rtm","ew","ldp","dom","cors"].forEach(k=>G(k).checked=!!d[k]);if(d.as!==undefined)G("autosave").checked=d.as;if(d.px)pxs=d.px;if(d.pi!==undefined)sel=d.pi;if(sel>=pxs.length)sel=-1;if(d.ag!==undefined)agSt=d.ag;rP();noSl=d.ns||0;if(noSl)uF=G("url").value;else uF="";chkU(G("url"))}catch(e){}}function tP(){let d=G("p-drop"),s=d.style.display=="block";d.style.display=s?"none":"block";if(!s)d.style.setProperty("--hw",(G("dd-con").parentNode.getBoundingClientRect().right-d.parentElement.parentElement.getBoundingClientRect().left-20)+"px")}function sP(i){sel=i;rP();tP();hIn()}function addP(){let u=G("p-new").value.trim();if(u){pxs.push({n:new URL(u).hostname,u:u});G("p-new").value="";rP();hIn()}}function mvP(i,d,e){e.stopPropagation();let n=i+d;if(n>=0&&n<pxs.length){let t=pxs[i];pxs[i]=pxs[n];pxs[n]=t;if(sel==i)sel=n;else if(sel==n)sel=i;rP();hIn()}}function dlP(i,e){e.stopPropagation();pxs.splice(i,1);if(sel>=pxs.length)sel=-1;rP();hIn()}function edP(i,e){e.stopPropagation();edI=i;rP()}function svP(i,e){e.stopPropagation();let nn=G("en-"+i).value.trim(),nu=G("eu-"+i).value.trim();if(nn&&nu){pxs[i]={n:nn,u:nu};edI=-1;rP();hIn()}}function rP(){G("p-cur").innerText=sel<0?"AUTO":pxs[sel].n;G("p-auto").className="p-name"+(sel<0?" sel":"");if(G("p-ag"))G("p-ag").checked=agSt;let h="";pxs.forEach((p,i)=>{if(i==edI){h+=`<div class=p-edit-row><input id=en-${i} value="${p.n}" style="width:60px"><input id=eu-${i} value="${p.u}" style="flex-grow:1"><button class="p-btn sv" onclick="svP(${i},event)">&#10003;</button></div>`}else{h+=`<div class=p-row><div style="display:flex;align-items:center;width:100%;font-weight:700"><button class=p-btn onclick="mvP(${i},-1,event)">&#8593;</button><div class="p-name${sel==i?" sel":""}" onclick="sP(${i})" style="padding:0 5px;flex:1"><span>${p.n}</span></div><button class="p-btn ed" onclick="edP(${i},event)">&#9998;</button><button class="p-btn del" onclick="dlP(${i},event)">&#215;</button></div><div style="min-width:100%;max-width:var(--hw,80vw);margin-top:2px;font-weight:400"><button class=p-btn onclick="mvP(${i},1,event)" style="float:left;margin-right:4px">&#8595;</button><span class=p-url>${p.u}</span></div></div>`}});G("p-list").innerHTML=h}async function run(){clearTimeout(tm);if(G("autosave").checked)S(1);let u=G("url").value;if(u&&!u.startsWith('http'))u='https://'+u;let raw="",h=G("html").files[0],j=G("js").files[0],errs=[];if(h)raw=await h.text();else if(u&&G("sync").checked)try{if(G("cors").checked){let q=sel<0?pxs:[pxs[sel]];if(agSt){raw=await new Promise((RES,REJ)=>{if(!q.length)REJ(new Error("No Proxies"));let win=0,fail=0,ptr=0,cs=[];const F=i=>{if(win||i>=q.length)return;let c=new AbortController();cs.push(c);fetch(q[i].u+encodeURIComponent(u),{signal:c.signal}).then(r=>{if(!r.ok)throw 0;return q[i].u.includes('allorigins')?r.json().then(j=>j.contents):r.text()}).then(t=>{if(t&&!win){win=1;cs.forEach(x=>x!=c&&x.abort());RES(t)}else throw 0}).catch(()=>{fail++;if(!win&&fail==q.length)REJ(new Error("All Proxies Failed"))})};F(ptr++);setTimeout(()=>{if(!win)F(ptr++)},200);let iv=setInterval(()=>{if(win||ptr>=q.length)clearInterval(iv);else F(ptr++)},1000)})}else{for(let p of q){try{let r=await fetch(p.u+encodeURIComponent(u));if(!r.ok)throw new Error(r.status);if(p.u.includes('allorigins')){let d=await r.json();if(!d.contents)throw new Error('empty');raw=d.contents}else raw=await r.text();break}catch(e){errs.push(p.n+": "+e.message)}}if(!raw)throw new Error("All Proxies Failed")}raw=raw.replace(/<meta\s+http-equiv=["']?Content-Security-Policy["']?.*?>/gi,'')}else{raw=await(await fetch(u)).text()}}catch(e){let m="Type: "+e.name+" Message: "+e.message,x="",d="";if(!G("cors").checked&&/failed to fetch/i.test(e.message)){try{await fetch(u,{mode:'no-cors'});x="Access to fetch at '"+u+"' from origin 'null' has been blocked by CORS policy.";d="Enable Bypass CORS to bypass cors :)"}catch(z){x="Net::ERR_INTERNET_DISCONNECTED";d="Check URL or Internet connection."}}else if(G("cors").checked){try{await fetch('https://1.1.1.1/favicon.ico',{mode:'no-cors'});try{await fetch(u,{mode:'no-cors'});x=errs.join("\n");d="All proxies failed. Check URL or try different proxies."}catch(t){x="Target Server ("+u+") is unresponsive."}}catch(n){x="Net::ERR_INTERNET_DISCONNECTED (No Internet Detected)"}}if(x)m+="\n\nExtra Details: "+x;if(d)m+="\n\nDeveloper Message: "+d;return alert(m)}else return alert("No Source");if(G("cf").checked)raw=raw.replace(/type="[\w-]+-text\/javascript"/g,'type="text/javascript"');if(G("sync").checked||G("link").checked||G("cors").checked){let b=u;if(b)raw=raw.replace(/<head\b[^>]*>/i,m=>m+`<base href="${b}">`);if(!raw.includes("<base "))raw="<base href='"+b+"'>"+raw}let tV=G("time").value.trim(),[_,op,nm]=tV.match(/^(=|\+=|-=)?(.*)/)||[0,"+",0],tN=parseFloat(nm)||0;if(!op||op=="+=")op="+";if(op=="-=")op="-";let js=j?await j.text():"";let pc="";if(G("ldp").checked){let isD=G("dom").checked;let src=`((u)=>{try{let l=new URL(u);return l.protocol[0]=='h'?(${isD}?l.origin:u):(${isD}?u:'')}catch(e){return ''}})(document.baseURI)`;pc=`((P=\`website_changer.website_locals.\${${src}||document.title||"unnamed"}.\`)=>['localStorage','sessionStorage'].map(N=>{let T=window[N],K=()=>Object.keys(T).filter(x=>!x.indexOf(P));try{Object.defineProperty(window,N,{value:new Proxy(T,{get:(t,p)=>({setItem:(k,v)=>t.setItem(P+k,v),getItem:k=>t.getItem(P+k),removeItem:k=>t.removeItem(P+k),clear:()=>K().map(k=>t.removeItem(k)),key:i=>(K()[i]||P).slice(P.length)||null,length:K().length}[p]||(typeof p=='string'&&!(p in t)?t.getItem(P+p):t[p])),set:(t,p,v)=>(t.setItem(P+p,v),1),deleteProperty:(t,p)=>(t.removeItem(P+p),1),ownKeys:()=>K().map(k=>k.slice(P.length)),getOwnPropertyDescriptor:(t,p)=>({configurable:1,enumerable:1,value:t.getItem(P+p)})})})}catch(e){}}))();`}let rc="";if(G("rtm").checked){let we=G("ew").checked?`else if(ev.data&&ev.data.eval){try{(0,eval)(ev.data.eval)}catch(e){}}`:"";rc=`(function(){const SYNC_AUDIO=true;const SYNC_CSS=true;const workerBlobCache=new Map();const workerBoostSource=\`(function(){let workerSpeed=1.0;try{const bc=new BroadcastChannel('speed-boost-sync');bc.onmessage=(ev)=>{if(typeof ev.data==='number')workerSpeed=ev.data;${we}}}catch(e){}const nativeNow=performance.now.bind(performance);let lastReal=nativeNow(),lastVirtual=0;performance.now=function(){const now=nativeNow();const delta=now-lastReal;lastReal=now;lastVirtual+=delta*workerSpeed;return lastVirtual};const nST=self.setTimeout,nSI=self.setInterval;self.setTimeout=(f,d,...a)=>nST(f,Math.max(1,(d||0)/workerSpeed),...a);self.setInterval=(f,d,...a)=>nSI(f,Math.max(1,(d||0)/workerSpeed),...a)})();\`;const NativeWorker=window.Worker;window.Worker=function(url,options){if(workerBlobCache.has(url))return new NativeWorker(workerBlobCache.get(url),options);try{const xhr=new XMLHttpRequest();xhr.open('GET',url,false);xhr.send();const combined=workerBoostSource+';\\n'+xhr.responseText;const blobURL=URL.createObjectURL(new Blob([combined],{type:'application/javascript'}));workerBlobCache.set(url,blobURL);return new NativeWorker(blobURL,options)}catch(e){return new NativeWorker(url,options)}};const nRAF=window.requestAnimationFrame;const vTimers=new Map();let vIdCounter=0;let isLoopRunning=false;function tick(){if(vTimers.size===0){isLoopRunning=false;return}const now=performance.now();const toRemove=[];for(const[id,t]of vTimers){if(now>=t.target){try{if(typeof t.fn==='string')(0,eval)(t.fn);else t.fn.apply(window,t.args)}catch(e){}if(t.type===0)toRemove.push(id);else t.target=now+Math.max(1,t.delay)}}toRemove.forEach(id=>vTimers.delete(id));nRAF(tick)}function startLoop(){if(!isLoopRunning){isLoopRunning=true;nRAF(tick)}}window.setTimeout=function(fn,d,...args){vIdCounter++;vTimers.set(vIdCounter,{type:0,fn,args,delay:d,target:performance.now()+(d||0)});startLoop();return vIdCounter};window.setInterval=function(fn,d,...args){vIdCounter++;vTimers.set(vIdCounter,{type:1,fn,args,delay:d,target:performance.now()+(d||0)});startLoop();return vIdCounter};window.clearTimeout=window.clearInterval=id=>vTimers.delete(id);const originalGetter=Object.getOwnPropertyDescriptor(Event.prototype,'timeStamp').get;Object.defineProperty(Event.prototype,'timeStamp',{get:function(){return performance.now()}});const bc=new BroadcastChannel('speed-boost-sync');let _WCHS=1.0;function applySpeedToMedia(speed){if(SYNC_AUDIO){document.querySelectorAll('audio, video').forEach(el=>{el.playbackRate=speed})}if(SYNC_CSS&&document.getAnimations){document.getAnimations().forEach(anim=>{anim.playbackRate=speed})}}if(SYNC_AUDIO){new MutationObserver(mutations=>{mutations.forEach(m=>m.addedNodes.forEach(node=>{if(node.nodeName==='AUDIO'||node.nodeName==='VIDEO'){node.playbackRate=_WCHS}}))}).observe(document.body,{childList:true,subtree:true})}const initCheck=setInterval(()=>{if(window.tools&&window.tools.HS!==undefined){clearInterval(initCheck);_WCHS=window.tools.HS;applySpeedToMedia(_WCHS);let v=_WCHS;Object.defineProperty(window.tools,'HS',{get:()=>v,set:(val)=>{if(window.upd)window.upd();if(val!==v){v=val;bc.postMessage(val);applySpeedToMedia(val)}}})}},100)})();`}let s=`<script>window.errBuf=[];window.logF=(m,c)=>{let d='<div style="color:'+(c||'white')+';border-bottom:1px solid #333;font-family:monospace;word-break:break-all">'+m+'</div>';if(window.EL&&window.EL.lg)window.EL.lg.innerHTML=d+window.EL.lg.innerHTML;else window.errBuf.push({m,c});if(window.Fit)window.Fit()};window.FS=()=>{if(!document.fullscreenElement)document.documentElement.requestFullscreen();else if(document.exitFullscreen)document.exitFullscreen()};window.onerror=(m,s,l,c,e)=>window.logF("ERR: "+m,"red");let _l=console.log;console.log=(...a)=>{_l(...a);window.logF(a.join(" "),"#ccc")};document.title="WC: "+${JSON.stringify(u||"")};${pc}window.tools=window.tools||{};window.tools.HS=1.0;(function(){let O=Date,P=performance,rN=O.now.bind(O),rP=P.now.bind(P),lT=rN(),lP=rP(),vT=lT,vP=0,off=${tN*1e3},op='${op}';window.upd=()=>{let t=rN(),p=rP();vT+=(t-lT)*window.tools.HS;lT=t;vP+=(p-lP)*window.tools.HS;lP=p};let gT=()=>{window.upd();return op=='='?${tN}:op=='-'?vT-off:vT+off};window.Date=class extends O{constructor(...a){super(...(a.length?a:[gT()]))}};window.Date.now=()=>Math.round(gT());P.now=()=>{window.upd();return vP}})();try{${rc}}catch(e){window.logF("RTM Init Failed: "+e.message,"red")}window.addEventListener('DOMContentLoaded',()=>{if(${G("tool").checked}){let cs='#X{position:fixed;top:50px;left:20px;z-index:999999;width:50px;height:50px;min-width:50px;min-height:50px;box-sizing:border-box;flex-shrink:0;background:#70e;border:2px solid #fff;border-radius:50%;display:flex;justify-content:center;align-items:center;color:#fff;font-weight:700;box-shadow:0 0 10px #70e;cursor:pointer;user-select:none;font-size:11px}#P{position:fixed;top:50px;left:20px;z-index:999999;width:280px;min-width:260px;min-height:220px;height:275px;background:#050014f2;border:2px solid #93f;border-radius:6px;color:#fff;font-family:monospace;display:flex;flex-direction:column;box-shadow:0 0 20px #000;overflow:hidden}#H{background:#50a;padding:8px;font-weight:700;cursor:move;display:flex;justify-content:space-between;align-items:center;user-select:none;flex-shrink:0}#Ct{padding:10px;flex:1;display:flex;flex-direction:column;gap:5px;overflow:hidden;box-sizing:border-box}.rw{display:flex;align-items:center;justify-content:space-between;gap:8px;flex-shrink:0}.lbl{display:flex;align-items:center;gap:5px;font-size:11px;color:#ccc;cursor:pointer;user-select:none}.lbl input{margin:0;accent-color:#93f}.num{background:#222;border:1px solid #444;color:#fff;padding:4px;border-radius:0;text-align:center;font-family:monospace;font-size:11px}.num:focus{border-color:#93f;outline:none}#IN{width:70px;color:#eef}.mm{width:35px;color:#888}#SL{flex-grow:1;height:6px;background:#444;border-radius:3px;appearance:none;cursor:pointer;border:none}#SL::-webkit-slider-thumb{appearance:none;width:14px;height:14px;background:#93f;border-radius:50%;border:2px solid #fff;box-shadow:0 0 5px #000}.btn{background:#93f;color:#fff;border:1px solid #444;padding:5px 12px;border-radius:0;font-weight:700;cursor:pointer;font-size:11px}.btn:hover{filter:brightness(1.1)}#EV{width:100%;box-sizing:border-box;background:#222;border:1px solid #444;color:#ccc;padding:5px;font-family:monospace;font-size:11px;resize:none;height:auto;min-height:40px;flex-shrink:0;border-radius:0;white-space:pre-wrap;display:block;margin:5px 0 0 0}#EV:focus{border-color:#555;outline:none}#RB{width:100%;box-sizing:border-box;background:#50a;border:1px solid #444;padding:5px 12px;border-radius:0;font-weight:700;cursor:pointer;font-size:11px;color:#fff;display:block;margin:0;flex-shrink:0}#LG{font-size:10px;color:#aaa;flex:1;overflow-y:auto;min-height:0;background:transparent;padding-top:4px}#RZ{position:absolute;bottom:0;right:0;width:25px;height:25px;cursor:se-resize;display:flex;align-items:center;justify-content:center;color:#93f;font-size:14px;line-height:1;user-select:none}#LK{position:absolute;bottom:0;left:0;width:25px;height:25px;cursor:pointer;display:flex;align-items:center;justify-content:center;color:#666;font-size:14px;user-select:none}::-webkit-scrollbar{width:4px}::-webkit-scrollbar-thumb{background:#444;border-radius:2px}',d=document.createElement('div');d.innerHTML=\`<style>\${cs}</style><div id=X>x1</div><div id=P><div id=H><span>SPEED</span><div><span onclick=FS() style="cursor:pointer;margin-right:10px;font-size:14px" title="Fullscreen">&#x26F6;</span><span onclick=T(1) style=cursor:pointer>_</span></div></div><div id=Ct><div class=rw><label class=lbl><input type=checkbox id=UC onchange=V(EL.in.value,1)> Uncap(>2e6)</label><input id=IN class=num type=text value=1 oninput=V(this.value,1)></div><div class=rw><input class="num mm" id=MN value=0.1 oninput=Dr()><input id=SL type=range min=0 max=100 value=33.3 oninput=V(this.value,0)><input class="num mm" id=MX value=100 oninput=Dr()></div><div class=rw><label class=lbl><input type=checkbox id=AC onchange=K()> Auto</label><button id=BT class=btn onclick=A() style="flex-grow:1;background:#50a">APPLY</button></div><textarea id=EV placeholder="Console (eval)" oninput="Fit()"></textarea><button id=RB onclick=R()>RUN</button><div id=LG></div></div><div id=RZ>&#x21F2;</div><div id=LK onclick=ToggleLock()>&#128274;</div></div>\`;(document.body||document.documentElement).appendChild(d);let P=1.0;window.isLocked=1;window.Fit=()=>{let u=G('P'),e=G('EV'),l=G('LG'),c=G('Ct');if(!u||!e||!l)return;let uiH=c.scrollHeight-(e.offsetHeight+l.offsetHeight),tH=e.scrollHeight,lH=l.scrollHeight,req=uiH+tH+lH;if(!window.isLocked){u.style.height=req+'px';e.style.height=tH+'px'}else{let av=c.clientHeight-uiH,min=av*0.3,tar=tH;if(tar<min)tar=min;let max=av-min;if(lH>av-tar){if(tH>av*0.5&&lH>av*0.5)tar=av*0.5;else if(tar>max)tar=max}e.style.height=tar+'px'}};window.ToggleLock=()=>{window.isLocked=!window.isLocked;EL.lk.innerHTML=window.isLocked?'&#128274;':'&#128275;';Fit()};window.EL={u:G('P'),i:G('X'),in:G('IN'),sl:G('SL'),bt:G('BT'),ac:G('AC'),ev:G('EV'),lg:G('LG'),uc:G('UC'),mn:G('MN'),mx:G('MX'),lk:G('LK')};if(window.errBuf)window.errBuf.forEach(x=>window.logF(x.m,x.c));window.errBuf=null;function G(i){return document.getElementById(i)}window.T=m=>{let a=m?EL.i:EL.u,b=m?EL.u:EL.i;a.style.display='flex';b.style.display='none';a.style.top=b.style.top;a.style.left=b.style.left;a.style.display=m?'flex':'block';if(!m)Fit()};window.K=()=>{if(EL.ac.checked){EL.bt.style.opacity=0.5;A()}else{EL.bt.style.opacity=1;EL.bt.innerText="APPLY"}};let lg=Math.log10,ab=Math.abs;function gP(v,mn,mx){if(mn*mx>0){if(Math.sign(v)!=Math.sign(mn))return-99;let a=ab(mn),b=ab(mx),val=ab(v);return Math.log(val/a)/Math.log(b/a)}let l=mn,h=mx,rev=l>h;if(rev){let t=l;l=h;h=t}let L=l<-1?lg(ab(l)):0,R=h>1?lg(h):0,W=2,T=L+R+W,p=0;if(v<=-1&&l<-1)p=(Math.log(ab(l)/ab(v))/Math.log(ab(l)))*(L/T);else if(v>=1&&h>1)p=((L+W)/T)+(Math.log(v)/Math.log(h))*(R/T);else p=(L/T)+((v+1)/2)*(W/T);if(rev)p=1-p;return p}function gS(p,mn,mx){if(mn*mx>0){let a=ab(mn),b=ab(mx),r=a*Math.pow(b/a,p);return mn<0?-r:r}let l=mn,h=mx,rev=l>h;if(rev){let t=l;l=h;h=t;p=1-p}let L=l<-1?lg(ab(l)):0,R=h>1?lg(h):0,W=2,T=L+R+W;if(p<=L/T){let lp=p/(L/T),r=ab(l)*Math.pow(1/ab(l),lp);return-r}if(p>(L+W)/T){let rp=(p-(L+W)/T)/(R/T),r=1*Math.pow(h,rp);return r}return-1+((p-(L/T))/(W/T))*2}window.Dr=()=>{let mn=parseFloat(EL.mn.value)||0.1,mx=parseFloat(EL.mx.value)||100;let pts=[{v:-1,c:'#38f'},{v:0,c:'#000'},{v:1,c:'#f00'}].map(x=>({p:gP(x.v,mn,mx)*100,c:x.c})).filter(x=>x.p>-2&&x.p<102).sort((a,b)=>a.p-b.p);let gr='linear-gradient(90deg, #444';pts.forEach(x=>{gr+=\`, #444 \${x.p-1}%, \${x.c} \${x.p-1}%, \${x.c} \${x.p+1}%, #444 \${x.p+1}%\`});gr+=')';EL.sl.style.background=gr;V(EL.in.value,1)};window.V=(v,m)=>{window.upd();let mn=parseFloat(EL.mn.value)||0.1,mx=parseFloat(EL.mx.value)||100,val=parseFloat(v)||0,r=0;if(m)r=val;else r=gS(val/100,mn,mx);let cap=0,effP=r;if(!EL.uc.checked&&ab(r)>2e6){cap=1;effP=2e6}P=effP;EL.lg.innerHTML=cap?'<span style="color:orange;font-weight:bold">SPEED CAPPED (2e6)</span>':'';EL.i.style.borderColor=cap?'orange':'#fff';EL.i.style.color=cap?'orange':'#fff';let t=ab(P)<1e-3?P.toExponential(1):(ab(P)<10?P.toFixed(1):Math.round(P));if(ab(P)>=1e6)t=P.toExponential(1);EL.i.innerText='x'+t+(cap?'!':'');if(!m){EL.in.value=ab(P)<0.01?P.toExponential(2):(ab(P)<10?P.toFixed(2):P.toFixed(1))}else{EL.sl.value=gP(r,mn,mx)*100}K()};window.A=()=>{window.tools.HS=P;if(!EL.ac.checked){EL.bt.style.background='#93f';EL.bt.innerText="OK";setTimeout(()=>{EL.bt.style.background='';EL.bt.innerText="APPLY"},500)}};window.R=()=>{try{EL.lg.innerHTML='<div style="color:lime;border-bottom:1px solid #333">> '+eval(EL.ev.value)+'</div>'+EL.lg.innerHTML}catch(e){EL.lg.innerHTML='<div style="color:red;border-bottom:1px solid #333">'+e.message+'</div>'+EL.lg.innerHTML}Fit()};let D=(b,h)=>{let f=0,x,y,ev=(k,fn)=>window.addEventListener(k,fn,{passive:false});h.onmousedown=h.ontouchstart=e=>{f=1;let t=e.touches?e.touches[0]:e;x=b.offsetLeft-t.clientX;y=b.offsetTop-t.clientY};ev('mousemove',e=>{if(f){e.preventDefault();let t=e.touches?e.touches[0]:e;b.style.left=x+t.clientX+'px';b.style.top=y+t.clientY+'px'}});ev('touchmove',e=>{if(f){e.preventDefault();let t=e.touches?e.touches[0]:e;b.style.left=x+t.clientX+'px';b.style.top=y+t.clientY+'px'}});ev('mouseup',()=>f=0);ev('touchend',()=>f=0)};let RS=(h,b)=>{let f=0,sX,sY,w,ht,lt=0;h.ontouchstart=e=>{let n=Date.now();if(n-lt<300){b.style.width='';b.style.height='275px';Fit();f=0;return}lt=n;f=1;let t=e.touches[0];sX=t.clientX;sY=t.clientY;w=b.offsetWidth;ht=b.offsetHeight;e.stopPropagation()};window.addEventListener('touchmove',e=>{if(f){let t=e.touches[0];b.style.width=(w+(t.clientX-sX))+'px';b.style.height=(ht+(t.clientY-sY))+'px';Fit()}});window.addEventListener('touchend',()=>f=0)};D(EL.u,G('H'));D(EL.i,EL.i);RS(G('RZ'),EL.u);EL.i.onclick=()=>T(0);Dr();Fit()}});<\/script><script>${G("code").value}\n${js}<\/script>`;raw=raw.includes("<head>")?raw.replace("<head>","<head>"+s):s+raw;document.open();document.write(raw);document.close();if(G("link").checked&&u)try{history.replaceState(null,"",u)}catch(e){}}</script></body></html>
